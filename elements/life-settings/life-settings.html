<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/core-selector/core-selector.html">

<polymer-element name="life-settings" attributes="player revengePlayers spaces">
  <template>
    <link rel="stylesheet" href="life-settings.css">
    <core-selector valueattr="id" id="settingSelector" horizontal layout
      on-core-select="{{settingChanged}}">
      <section id="adjuster" flex>Cash Adjuster</section>
      <section id="payday" flex><button red on-tap="{{payday}}">PAY DAY!</button></section>
      <section id="children" flex>Children</section>
      <section id="revenge" flex>Revenge</section>
      <section id="stock-market" flex>Stock Market</section>
      <section id="lucky-number" flex>Lucky Number</section>
      <section id="toll-bridge" flex>Toll Bridge</section>
      <section id="all"><core-icon icon="menu" alt="All Spaces"></core-icon></section>
    </core-selector>

    <div detail id="adjuster-detail" horizontal layout center center-justified>
      <button green add adjuster multiplier="1" on-tap="{{adjustCash}}">+</button>
      <input id="adjust-value" type="text" maxlength="3" on-focus="{{highlight}}" />
      <button red minus adjuster multiplier="-1" on-tap="{{adjustCash}}">-</button>
      <label for="adjust-value">(x1000)</label>
    </div>

    <div detail id="children-detail" horizontal layout center center-justified>
      <button light-blue on-tap="{{sonIsBorn}}">A son is born!</button>
      <button pink on-tap="{{daughterIsBorn}}">A daughter is born!</button>
    </div>

    <div detail id="revenge-detail" horizontal layout center center-justified>
      <template if="{{revengePlayers.length}}">
        <button gold on-tap="{{getRevenge}}" amount="200000">Get revenge on</button>
        <select id="revenge-whom">
        <template repeat="{{p in revengePlayers}}">
          <option value="{{p.index}}">{{p.name}}</option>
        </template>
        </select>
        <span>or send them back 10 spaces</span>
      </template>
      <template if="{{!revengePlayers.length}}">
        No player has enough cash, send someone back 10 spaces instead
      </template>
    </div>

    <div detail id="stock-market-detail" horizontal layout center center-justified>
      <template if="{{player.hasInsurance.stock}}">
        I played the stock market and spun a
        <button red on-tap="{{transaction}}" amount="-60000">1, 2, or 3</button>
        <button grey>4, 5, or 6</button>
        <button green on-tap="{{transaction}}" amount="120000">7, 8, 9, or 10</button>
      </template>
      <template if="{{!player.hasInsurance.stock}}">
        You need stock insurance to play the stock market
      </template>
    </div>

    <div detail id="lucky-number-detail" horizontal layout center center-justified>
      <button red on-tap="{{luckyNumber}}" amount="24000">I spun the lucky number</button>
    </div>

    <div detail id="toll-bridge-detail" horizontal layout center center-justified>
      <template if="{{player.ownsTollBridge}}">
        <button grey on-tap="{{tollBridgeLost}}">I no longer own the toll bridge</button>
      </template>
      <template if="{{!player.ownsTollBridge}}">
        I do not own the toll bridge
      </template>
    </div>

    <div detail id="all-detail" horizontal layout center center-justified wrap>
      <template repeat="{{space in spaces}}">
        <button grey on-tap="{{setSpace}}" space="{{space.id}}">{{space.label}}</button>
      </template>
    </div>
  </template>
  <script src="life-settings.js"></script>
</polymer-element>
