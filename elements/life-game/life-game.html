<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/layout/layout.html">
<link rel="import" href="../../bower_components/iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="../../elements/life-player/life-player.html">
<link rel="import" href="../../elements/life-spaces/life-spaces.html">
<link rel="import" href="../../elements/life-settings/life-settings.html">

<dom-module id="life-game"
  on-everyone-pays="everyonePays"
  on-pay-day="payday"
  on-toll-bridge-crossed="tollBridgeCrossed"
  on-millionaire="becomeMillionaire"
  on-tycoon="becomeTycoon"
  on-failed="failedAtLife">
  <link rel="import" type="css" href="life-game.css">
  <template>
    <div class="vertical layout" id="playerList">
      <template is="dom-repeat" items="{{players}}">
        <life-player player="{{item}}" started="{{started}}" player-index="{{index}}" num-players="{{players.length}}"
          on-move-player="movePlayer"
          on-remove-player="removePlayer"
          on-select-player="selectPlayer"></life-player>
      </template>
    </div>

    <life-spaces id="spaces"
      player="{{currentPlayer}}"
      started="{{started}}"
      allSpaces="{{spaces}}"
      on-transaction="onTransaction"></life-spaces>

    <life-settings id="settings"
      player="{{currentPlayer}}"
      revengeables="{{revengeables}}"
      spaces="{{spaces}}"
      hidden$="{{hideSettings(started, gameOver)}}"
      on-transaction="onTransaction"
      on-child-birth="onChildBirth"
      on-lucky-number-spun="onLuckyNumberSpun"></life-settings>
    <iron-a11y-keys keys="n esc" target="{{}}" on-keys-pressed="keyHandler"></iron-a11y-keys>
  </template>
</dom-module>
<script src="life-game.js"></script>
